<!DOCTYPE html>
<html lang="en">

<head>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66582-32"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-66582-32');
    </script>

    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Visualizations - PySpark examples" />
<meta property="og:description" content="Feature Visualization In this notebook we will visualize the feature statistics stored in the featurestore for featuregroups and training datasets. This notebook assumes that you have already run the featurestore tour and the notebook FeaturestoreTourPython.ipynb.
The following featuregroups should exist in the featurestore:
 games_features attendances_features players_features season_scores_features teams_features  And the following training dataset should exist in the featurestore:
 team_position_prediction  Plotting using the PySpark Kernel Background When using Jupyter on Hopsworks, a library called sparkmagic is used to interact with the Hops cluster." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://examples.hopsworks.ai/featurestore/visualizations/feature_visualizations/" />



<meta property="article:published_time" content="2021-02-24T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2021-02-24T00:00:00&#43;00:00"/>











<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Visualizations - PySpark examples"/>
<meta name="twitter:description" content="Feature Visualization In this notebook we will visualize the feature statistics stored in the featurestore for featuregroups and training datasets. This notebook assumes that you have already run the featurestore tour and the notebook FeaturestoreTourPython.ipynb.
The following featuregroups should exist in the featurestore:
 games_features attendances_features players_features season_scores_features teams_features  And the following training dataset should exist in the featurestore:
 team_position_prediction  Plotting using the PySpark Kernel Background When using Jupyter on Hopsworks, a library called sparkmagic is used to interact with the Hops cluster."/>
<meta name="generator" content="Hugo 0.40.3" />

    
<script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Visualizations - PySpark examples",
  "url": "https://examples.hopsworks.ai/featurestore/visualizations/feature_visualizations/",
  "wordCount": "1370",
  "datePublished": "2021-02-24T00:00:00&#43;00:00",
  "dateModified": "2021-02-24T00:00:00&#43;00:00",
  "author": {
  "@type": "Person",
  "name": ""
  }
  }
</script> 

    <title>Visualizations - PySpark examples</title>

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb"
        crossorigin="anonymous">

    
    <link href="https://examples.hopsworks.ai/css/custom.css" rel="stylesheet">
    <link href="https://examples.hopsworks.ai/css/syntax.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Muli:400,500,700" rel="stylesheet">

    <link href="" rel="alternate" type="application/rss+xml" title="Hopsworks Examples" />

    <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

</head>

<body>

    <nav class="navbar navbar-expand-sm fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="https://examples.hopsworks.ai">Hopsworks Examples</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="nav navbar-nav mr-auto"></ul>
                <ul class="nav navbar-nav">
                    <li><a href="https://hopsworks.ai" title="Hopsworks.ai">hopsworks.ai</a></li>
                    <li><a href="https://docs.hopsworks.ai" title="Docs">docs.hopsworks.ai</a></li>
                </ul>
            </div>
        </div>
    </nav>


    
    <div class="container">
        <div class="row">
            <div class="col-sm-12">

                 


<article>
  <div class="technical_note">
    <header>
      <div class="alert alert-warning flashcard_ad" role="alert">
	Want to learn machine learning? Try my <a href="https://machinelearningflashcards.com" class="alert-link">machine learning flashcards</a>, <a href='https://amzn.to/2HwnWty' class="alert-link">book</a>, or <a href='https://www.youtube.com/channel/UCnd4Fi-ODvuPbxR2fO2j7kA' class="alert-link">study with me.</a>.
      </div>
      <h1 class="technical_note_title">Visualizations - PySpark examples</h1>
      <div class="technical_note_date">
	<time datetime=" 2021-02-24T00:00:00Z "> 24 Feb 2021</time>
      </div>
    </header>
    <div class="content">

      

<h1 id="feature-visualization">Feature Visualization</h1>

<p>In this notebook we will visualize the feature statistics stored in the featurestore for featuregroups and training datasets. This notebook assumes that you have already run the featurestore tour and the notebook <code>FeaturestoreTourPython.ipynb</code>.</p>

<p>The following featuregroups should exist in the featurestore:</p>

<ul>
<li><code>games_features</code></li>
<li><code>attendances_features</code></li>
<li><code>players_features</code></li>
<li><code>season_scores_features</code></li>
<li><code>teams_features</code></li>
</ul>

<p>And the following training dataset should exist in the featurestore:</p>

<ul>
<li><code>team_position_prediction</code></li>
</ul>

<h3 id="plotting-using-the-pyspark-kernel-background">Plotting using the PySpark Kernel Background</h3>

<p>When using Jupyter on Hopsworks, a library called sparkmagic is used to interact with the Hops cluster. When you create a Jupyter notebook on Hopsworks, you first select a kernel. A kernel is simply a program that executes the code that you have in the Jupyter cells, you can think of it as a REPL-backend to your jupyter notebook that acts as a frontend.</p>

<p>Sparkmagic works with a remote REST server for Spark, called livy, running inside the Hops cluster. Livy is an interface that Jupyter-on-Hopsworks uses to interact with the Hops cluster. When you run Jupyter cells using the pyspark kernel, the kernel will automatically send commands to livy in the background for executing the commands on the cluster.</p>

<p>Since the code in a pyspark notebook is being executed remotely, in the spark cluster, regular python plotting will not work. What you can do however is to use the magic <code>%%local</code> to access the local python kernel, or save figures as pngs to HopsFS and plot them locally later, we will go over both approaches in this tutorial.</p>

<h3 id="imports">Imports</h3>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">import os
from hops import featurestore, hdfs</code></pre></div>
<pre><code>Starting Spark application
</code></pre>

<table>
<tr><th>ID</th><th>YARN Application ID</th><th>Kind</th><th>State</th><th>Spark UI</th><th>Driver log</th><th>Current session?</th></tr><tr><td>19</td><td>application_1560074891958_0021</td><td>pyspark</td><td>idle</td><td><a target="_blank" href="http://hopsworks0.logicalclocks.com:8088/proxy/application_1560074891958_0021/">Link</a></td><td><a target="_blank" href="http://hopsworks0.logicalclocks.com:8042/node/containerlogs/container_e01_1560074891958_0021_01_000001/demo_featurestore_admin000__meb10000">Link</a></td><td>âœ”</td></tr></table>

<pre><code>SparkSession available as 'spark'.
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
%matplotlib inline
from hops import featurestore</code></pre></div>
<h3 id="plotting-in-local">Plotting in <code>%%local</code></h3>

<p>In the local environment we can plot like usual, just remember to execute a cell with <code>%matplotlib inline</code> so that the figures will be visualized in the notebook</p>

<h4 id="plotting-feature-distributions">Plotting Feature Distributions</h4>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_distributions(&#34;games_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_8_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_distributions(&#34;attendances_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_9_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_distributions(&#34;players_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_10_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_distributions(&#34;season_scores_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_11_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_distributions(&#34;teams_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_12_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_training_dataset_distributions(&#34;team_position_prediction&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_13_1.png" alt="png" /></p>

<h4 id="plotting-feature-correlations">Plotting Feature Correlations</h4>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_correlations(&#34;players_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_15_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_correlations(&#34;teams_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_16_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_correlations(&#34;season_scores_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_17_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_correlations(&#34;attendances_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_18_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_correlations(&#34;games_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_19_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_training_dataset_correlations(&#34;team_position_prediction&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_20_1.png" alt="png" /></p>

<h4 id="plotting-feature-clusters">Plotting Feature Clusters</h4>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_clusters(&#34;games_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_22_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_clusters(&#34;attendances_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_23_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_clusters(&#34;season_scores_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_24_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_clusters(&#34;teams_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_25_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_featuregroup_clusters(&#34;players_features&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_26_1.png" alt="png" /></p>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
featurestore.visualize_training_dataset_clusters(&#34;team_position_prediction&#34;)</code></pre></div>
<pre><code>Remember to add %%matplotlib inline when doing visualizations in Jupyter notebooks
</code></pre>

<p><img src="Feature_Visualizations_files/Feature_Visualizations_27_1.png" alt="png" /></p>

<h4 id="visualizing-descriptive-statistics-of-features">Visualizing Descriptive Statistics of Features</h4>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
desc_stats_df = featurestore.visualize_training_dataset_descriptive_stats(&#34;team_position_prediction&#34;)
desc_stats_df.head()</code></pre></div>
<pre><code>/srv/hops/anaconda/anaconda/envs/python36/lib/python3.6/site-packages/autovizwidget/widget/utils.py:50: FutureWarning:

A future version of pandas will default to `skipna=True`. To silence this warning, pass `skipna=True|False` explicitly.




VBox(children=(HBox(children=(HTML(value='Type:'), Button(description='Table', layout=Layout(width='70px'), stâ€¦



Output()
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
desc_stats_df = featurestore.visualize_featuregroup_descriptive_stats(&#34;games_features&#34;)
desc_stats_df.head()</code></pre></div>
<pre><code>/srv/hops/anaconda/anaconda/envs/python36/lib/python3.6/site-packages/autovizwidget/widget/utils.py:50: FutureWarning:

A future version of pandas will default to `skipna=True`. To silence this warning, pass `skipna=True|False` explicitly.




VBox(children=(HBox(children=(HTML(value='Type:'), Button(description='Table', layout=Layout(width='70px'), stâ€¦



Output()
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
desc_stats_df = featurestore.visualize_featuregroup_descriptive_stats(&#34;attendances_features&#34;)
desc_stats_df.head()</code></pre></div>
<pre><code>/srv/hops/anaconda/anaconda/envs/python36/lib/python3.6/site-packages/autovizwidget/widget/utils.py:50: FutureWarning:

A future version of pandas will default to `skipna=True`. To silence this warning, pass `skipna=True|False` explicitly.




VBox(children=(HBox(children=(HTML(value='Type:'), Button(description='Table', layout=Layout(width='70px'), stâ€¦



Output()
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
desc_stats_df = featurestore.visualize_featuregroup_descriptive_stats(&#34;season_scores_features&#34;)
desc_stats_df.head()</code></pre></div>
<pre><code>/srv/hops/anaconda/anaconda/envs/python36/lib/python3.6/site-packages/autovizwidget/widget/utils.py:50: FutureWarning:

A future version of pandas will default to `skipna=True`. To silence this warning, pass `skipna=True|False` explicitly.




VBox(children=(HBox(children=(HTML(value='Type:'), Button(description='Table', layout=Layout(width='70px'), stâ€¦



Output()
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
desc_stats_df = featurestore.visualize_featuregroup_descriptive_stats(&#34;teams_features&#34;)
desc_stats_df.head()</code></pre></div>
<pre><code>/srv/hops/anaconda/anaconda/envs/python36/lib/python3.6/site-packages/autovizwidget/widget/utils.py:50: FutureWarning:

A future version of pandas will default to `skipna=True`. To silence this warning, pass `skipna=True|False` explicitly.




VBox(children=(HBox(children=(HTML(value='Type:'), Button(description='Table', layout=Layout(width='70px'), stâ€¦



Output()
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">%%local
desc_stats_df = featurestore.visualize_featuregroup_descriptive_stats(&#34;players_features&#34;)
desc_stats_df.head()</code></pre></div>
<pre><code>/srv/hops/anaconda/anaconda/envs/python36/lib/python3.6/site-packages/autovizwidget/widget/utils.py:50: FutureWarning:

A future version of pandas will default to `skipna=True`. To silence this warning, pass `skipna=True|False` explicitly.




VBox(children=(HBox(children=(HTML(value='Type:'), Button(description='Table', layout=Layout(width='70px'), stâ€¦



Output()
</code></pre>

<h3 id="plotting-in-a-spark-driver-or-executor">Plotting in a <code>spark</code> driver or executor</h3>

<p>Since the notebook server is talking remotely to the spark driver or executor we can&rsquo;t expect visualizations to work out of the box. However, what you can do to perform visualizations in spark is to set the flag <code>plot=False</code> which will not plot the figure but rather return it, and then you can save the figure as a .png or .jpg to HopsFS and access it later on</p>

<h4 id="plotting-feature-distributions-1">Plotting Feature Distributions</h4>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_distributions(&#34;teams_features&#34;, plot=False)
fig.savefig(&#34;teams_features_distributions.png&#34;)
hdfs.copy_to_hdfs(&#34;teams_features_distributions.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path teams_features_distributions.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//teams_features_distributions.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_distributions(&#34;games_features&#34;, plot=False)
fig.savefig(&#34;games_features_distributions.png&#34;)
hdfs.copy_to_hdfs(&#34;games_features_distributions.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path games_features_distributions.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//games_features_distributions.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_distributions(&#34;season_scores_features&#34;, plot=False)
fig.savefig(&#34;season_scores_features_distributions.png&#34;)
hdfs.copy_to_hdfs(&#34;season_scores_features_distributions.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path season_scores_features_distributions.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//season_scores_features_distributions.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_distributions(&#34;attendances_features&#34;, plot=False)
fig.savefig(&#34;attendances_features_distributions.png&#34;)
hdfs.copy_to_hdfs(&#34;attendances_features_distributions.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path attendances_features_distributions.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//attendances_features_distributions.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_distributions(&#34;players_features&#34;, plot=False)
fig.savefig(&#34;players_features_distributions.png&#34;)
hdfs.copy_to_hdfs(&#34;players_features_distributions.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path players_features_distributions.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//players_features_distributions.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_training_dataset_distributions(&#34;team_position_prediction&#34;, plot=False)
fig.savefig(&#34;team_position_prediction_distributions.png&#34;)
hdfs.copy_to_hdfs(&#34;team_position_prediction_distributions.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path team_position_prediction_distributions.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//team_position_prediction_distributions.png

Finished copying
</code></pre>

<h4 id="plotting-feature-correlations-1">Plotting Feature Correlations</h4>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_correlations(&#34;teams_features&#34;, plot=False)
fig.savefig(&#34;teams_features_correlations.png&#34;)
hdfs.copy_to_hdfs(&#34;teams_features_correlations.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path teams_features_correlations.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//teams_features_correlations.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_correlations(&#34;games_features&#34;, plot=False)
fig.savefig(&#34;games_features_correlations.png&#34;)
hdfs.copy_to_hdfs(&#34;games_features_correlations.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path games_features_correlations.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//games_features_correlations.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_correlations(&#34;attendances_features&#34;, plot=False)
fig.savefig(&#34;attendances_features_correlations.png&#34;)
hdfs.copy_to_hdfs(&#34;attendances_features_correlations.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path attendances_features_correlations.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//attendances_features_correlations.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_correlations(&#34;season_scores_features&#34;, plot=False)
fig.savefig(&#34;season_scores_features_correlations.png&#34;)
hdfs.copy_to_hdfs(&#34;season_scores_features_correlations.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path season_scores_features_correlations.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//season_scores_features_correlations.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_correlations(&#34;players_features&#34;, plot=False)
fig.savefig(&#34;players_features_correlations.png&#34;)
hdfs.copy_to_hdfs(&#34;players_features_correlations.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path players_features_correlations.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//players_features_correlations.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_training_dataset_correlations(&#34;team_position_prediction&#34;, plot=False)
fig.savefig(&#34;team_position_prediction_correlations.png&#34;)
hdfs.copy_to_hdfs(&#34;team_position_prediction_correlations.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path team_position_prediction_correlations.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//team_position_prediction_correlations.png

Finished copying
</code></pre>

<h4 id="plotting-feature-clusters-1">Plotting Feature Clusters</h4>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_clusters(&#34;teams_features&#34;, plot=False)
fig.savefig(&#34;teams_features_clusters.png&#34;)
hdfs.copy_to_hdfs(&#34;teams_features_clusters.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path teams_features_clusters.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//teams_features_clusters.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_clusters(&#34;players_features&#34;, plot=False)
fig.savefig(&#34;players_features_clusters.png&#34;)
hdfs.copy_to_hdfs(&#34;players_features_clusters.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path players_features_clusters.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//players_features_clusters.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_clusters(&#34;attendances_features&#34;, plot=False)
fig.savefig(&#34;attendances_features_clusters.png&#34;)
hdfs.copy_to_hdfs(&#34;attendances_features_clusters.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path attendances_features_clusters.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//attendances_features_clusters.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_clusters(&#34;season_scores_features&#34;, plot=False)
fig.savefig(&#34;season_scores_features_clusters.png&#34;)
hdfs.copy_to_hdfs(&#34;season_scores_features_clusters.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path season_scores_features_clusters.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//season_scores_features_clusters.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_featuregroup_clusters(&#34;games_features&#34;, plot=False)
fig.savefig(&#34;games_features_clusters.png&#34;)
hdfs.copy_to_hdfs(&#34;games_features_clusters.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path games_features_clusters.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//games_features_clusters.png

Finished copying
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">fig = featurestore.visualize_training_dataset_clusters(&#34;team_position_prediction&#34;, plot=False)
fig.savefig(&#34;team_position_prediction_clusters.png&#34;)
hdfs.copy_to_hdfs(&#34;team_position_prediction_clusters.png&#34;, &#34;Resources/&#34;, overwrite=True)</code></pre></div>
<pre><code>Started copying local path team_position_prediction_clusters.png to hdfs path hdfs://10.0.2.15:8020/Projects/demo_featurestore_admin000/Resources//team_position_prediction_clusters.png

Finished copying
</code></pre>

<h4 id="visualizing-descriptive-statistics-of-features-1">Visualizing Descriptive Statistics of Features</h4>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">desc_stats_df = featurestore.visualize_featuregroup_descriptive_stats(&#34;teams_features&#34;)
desc_stats_df.head()</code></pre></div>
<pre><code>   metric  team_budget   team_id  team_position
0  stddev    5238.9430  14.57738       14.57738
1     min     760.8729   1.00000        1.00000
2    mean    8723.2920  25.50000       25.50000
3   count      50.0000  50.00000       50.00000
4     max   21319.5330  50.00000       50.00000
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">desc_stats_df = featurestore.visualize_featuregroup_descriptive_stats(&#34;games_features&#34;)
desc_stats_df.head()</code></pre></div>
<pre><code>   metric  home_team_id         score  away_team_id
0  stddev     14.334562      0.918359     14.504639
1     min      1.000000      1.000000      1.000000
2    mean     25.589900      2.001300     25.576800
3   count  10000.000000  10000.000000  10000.000000
4     max     50.000000      3.000000     50.000000
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">desc_stats_df = featurestore.visualize_featuregroup_descriptive_stats(&#34;season_scores_features&#34;)
desc_stats_df.head()</code></pre></div>
<pre><code>   metric  sum_position   team_id  average_position
0  stddev      306.1239  14.57738         15.306195
1     min      542.0000   1.00000         27.100000
2    mean     1009.7800  25.50000         50.489000
3   count       50.0000  50.00000         50.000000
4     max     1607.0000  50.00000         80.350000
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">desc_stats_df = featurestore.visualize_featuregroup_descriptive_stats(&#34;attendances_features&#34;)
desc_stats_df.head()</code></pre></div>
<pre><code>   metric  sum_attendance   team_id  average_attendance
0  stddev      284646.200  14.57738          14232.3090
1     min       20770.475   1.00000           1038.5237
2    mean      173387.880  25.50000           8669.3940
3   count          50.000  50.00000             50.0000
4     max     1846021.800  50.00000          92301.0860
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">desc_stats_df = featurestore.visualize_featuregroup_descriptive_stats(&#34;players_features&#34;)
desc_stats_df.head()</code></pre></div>
<pre><code>   metric  sum_player_rating  ...  sum_player_age  average_player_age
0  stddev         118708.750  ...        52.29132            0.522913
1     min          15096.327  ...      2434.00000           24.340000
2    mean          71738.375  ...      2556.84000           25.568400
3   count             50.000  ...        50.00000           50.000000
4     max         719186.300  ...      2700.00000           27.000000

[5 rows x 8 columns]
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-pyspark" data-lang="pyspark">desc_stats_df = featurestore.visualize_training_dataset_descriptive_stats(&#34;team_position_prediction&#34;)
desc_stats_df.head()</code></pre></div>
<pre><code>   metric  team_budget  ...  sum_player_rating  average_attendance
0  stddev    5238.9430  ...         118708.750          14232.3090
1     min     760.8729  ...          15096.327           1038.5237
2    mean    8723.2920  ...          71738.375           8669.3940
3   count      50.0000  ...             50.000             50.0000
4     max   21319.5330  ...         719186.300          92301.0860

[5 rows x 13 columns]
</code></pre>

    </div>
    <aside>
      <div class="bug_reporting">
	<h4>Find an error or bug?</h4>
	<p>Everything on this site is available on GitHub. Head to <a href='https://github.com/chrisalbon/notes/issues/new'>and submit a suggested change</a>. Include the tutorial's URL in the issue.</p>
      </div>
    </aside>

  </div>
</article>




            </div>

        </div>
    </div>

    

    <footer class="footer text-center">
        <div class="container">
            <span class="text-muted">This project contains 59 pages and is available on <a href="https://github.com/napsterinblue/notes">GitHub</a>. Copyright &copy; NapsterInBlue, <time datetime="2018">2018</time>.</span>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
        crossorigin="anonymous"></script>

</body>

</html>
